# SNMP Exporter configuration for MikroTik
# New format for snmp_exporter v0.30+

auths:
  monitoring_v2:
    community: monitoring
    security_level: noAuthNoPriv
    auth_protocol: MD5
    priv_protocol: DES
    version: 2

modules:
  mikrotik:
    walk:
      - 1.3.6.1.2.1.1        # system
      - 1.3.6.1.2.1.2.2      # interfaces
      - 1.3.6.1.2.1.31.1.1   # ifXTable (64-bit counters)
      - 1.3.6.1.4.1.14988.1  # MikroTik enterprise MIB
    metrics:
      # System info
      - name: sysUpTime
        oid: 1.3.6.1.2.1.1.3.0
        type: gauge
        help: System uptime in hundredths of a second
      - name: sysDescr
        oid: 1.3.6.1.2.1.1.1.0
        type: DisplayString
        help: System description
      - name: sysName
        oid: 1.3.6.1.2.1.1.5.0
        type: DisplayString
        help: System name

      # Interface stats (32-bit)
      - name: ifNumber
        oid: 1.3.6.1.2.1.2.1.0
        type: gauge
        help: Number of interfaces
      - name: ifDescr
        oid: 1.3.6.1.2.1.2.2.1.2
        type: DisplayString
        indexes:
          - labelname: ifIndex
            type: gauge
        help: Interface description
      - name: ifType
        oid: 1.3.6.1.2.1.2.2.1.3
        type: gauge
        indexes:
          - labelname: ifIndex
            type: gauge
        help: Interface type
      - name: ifMtu
        oid: 1.3.6.1.2.1.2.2.1.4
        type: gauge
        indexes:
          - labelname: ifIndex
            type: gauge
        help: Interface MTU
      - name: ifSpeed
        oid: 1.3.6.1.2.1.2.2.1.5
        type: gauge
        indexes:
          - labelname: ifIndex
            type: gauge
        help: Interface speed in bits/sec
      - name: ifOperStatus
        oid: 1.3.6.1.2.1.2.2.1.8
        type: gauge
        indexes:
          - labelname: ifIndex
            type: gauge
        help: Interface operational status (1=up, 2=down)
      - name: ifInOctets
        oid: 1.3.6.1.2.1.2.2.1.10
        type: counter
        indexes:
          - labelname: ifIndex
            type: gauge
        help: Inbound octets
      - name: ifInErrors
        oid: 1.3.6.1.2.1.2.2.1.14
        type: counter
        indexes:
          - labelname: ifIndex
            type: gauge
        help: Inbound errors
      - name: ifOutOctets
        oid: 1.3.6.1.2.1.2.2.1.16
        type: counter
        indexes:
          - labelname: ifIndex
            type: gauge
        help: Outbound octets
      - name: ifOutErrors
        oid: 1.3.6.1.2.1.2.2.1.20
        type: counter
        indexes:
          - labelname: ifIndex
            type: gauge
        help: Outbound errors

      # 64-bit counters (ifXTable)
      - name: ifName
        oid: 1.3.6.1.2.1.31.1.1.1.1
        type: DisplayString
        indexes:
          - labelname: ifIndex
            type: gauge
        help: Interface name
      - name: ifHCInOctets
        oid: 1.3.6.1.2.1.31.1.1.1.6
        type: counter
        indexes:
          - labelname: ifIndex
            type: gauge
        help: Inbound octets (64-bit)
      - name: ifHCOutOctets
        oid: 1.3.6.1.2.1.31.1.1.1.10
        type: counter
        indexes:
          - labelname: ifIndex
            type: gauge
        help: Outbound octets (64-bit)
      - name: ifHighSpeed
        oid: 1.3.6.1.2.1.31.1.1.1.15
        type: gauge
        indexes:
          - labelname: ifIndex
            type: gauge
        help: Interface speed in Mbps

      # MikroTik specific
      - name: mtxrHlTemperature
        oid: 1.3.6.1.4.1.14988.1.1.3.10.0
        type: gauge
        help: Device temperature in Celsius * 10
      - name: mtxrHlProcessorTemperature
        oid: 1.3.6.1.4.1.14988.1.1.3.11.0
        type: gauge
        help: Processor temperature in Celsius * 10
      - name: mtxrHlCpuFrequency
        oid: 1.3.6.1.4.1.14988.1.1.3.14.0
        type: gauge
        help: CPU frequency in MHz
      - name: mtxrHlActiveFan
        oid: 1.3.6.1.4.1.14988.1.1.3.17.0
        type: DisplayString
        help: Active fan status

  if_mib:
    walk:
      - 1.3.6.1.2.1.2
      - 1.3.6.1.2.1.31.1.1
    metrics:
      - name: ifNumber
        oid: 1.3.6.1.2.1.2.1.0
        type: gauge
      - name: ifDescr
        oid: 1.3.6.1.2.1.2.2.1.2
        type: DisplayString
        indexes:
          - labelname: ifIndex
            type: gauge
      - name: ifOperStatus
        oid: 1.3.6.1.2.1.2.2.1.8
        type: gauge
        indexes:
          - labelname: ifIndex
            type: gauge
      - name: ifHCInOctets
        oid: 1.3.6.1.2.1.31.1.1.1.6
        type: counter
        indexes:
          - labelname: ifIndex
            type: gauge
      - name: ifHCOutOctets
        oid: 1.3.6.1.2.1.31.1.1.1.10
        type: counter
        indexes:
          - labelname: ifIndex
            type: gauge
